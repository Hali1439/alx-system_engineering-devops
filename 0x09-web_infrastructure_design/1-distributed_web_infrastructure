Three-Server Distributed Web Infrastructure
ğŸ’¡ Scenario
Youâ€™re designing an infrastructure where multiple servers work together to:

Distribute load

Improve availability

Reduce risk of downtime

This design supports the website:
www.foobar.com

ğŸ–¥ï¸ Infrastructure Components
Component	Description
ğŸ§­ Domain: www.foobar.com	Human-friendly address
ğŸ“¦ Load Balancer (HAProxy)	Distributes incoming traffic
ğŸ–¥ï¸ Server 1	Nginx + App Server
ğŸ–¥ï¸ Server 2	App Server + Codebase
ğŸ—„ï¸ MySQL Database	Primary + Replica setup

ğŸ“Œ Component-by-Component Explanation
1. ğŸŒ Domain Name
www.foobar.com is mapped via DNS to the public IP of the load balancer.

The A record (or possibly CNAME) resolves www to the load balancer.

2. âš–ï¸ Load Balancer (HAProxy)
Handles all incoming traffic from the users.

Distributes requests to backend servers using a load balancing algorithm.

Configured for:

Round-robin algorithm:

Sends each new request to the next server in a circular fashion.

Helps balance traffic evenly.

Active-Active Setup:

Both servers are online and handle traffic simultaneously.

Maximizes resource usage and availability.

ğŸ”„ Active-Active vs. Active-Passive
Type	Description
Active-Active	All backend servers are active and serve traffic
Active-Passive	One server is active, others stay idle until needed (failover)

3. ğŸ–¥ï¸ Backend Servers
Server 1
Runs:

Nginx (Web Server) â†’ Handles HTTP requests

App Server (e.g., PHP, Node.js) â†’ Processes logic

Server 2
Runs:

App Server

Your codebase (frontend/backend files)

Both servers are connected to the database cluster and may read/write data, depending on the database configuration.

4. ğŸ—„ï¸ MySQL Database: Master-Slave (Primary-Replica)
Node	Role
Primary (Master)	Handles all writes and most reads
Replica (Slave)	Handles read-only queries; synchronizes with primary

How it works:

All INSERT/UPDATE/DELETE go to the Primary node.

Replica receives those changes asynchronously via replication.

Application can query replica for reads to reduce load on primary.

âš ï¸ Issues with This Infrastructure
â˜ ï¸ Single Points of Failure (SPOF)
Load Balancer: If it fails, no traffic reaches the backend servers.

Database Primary: If it fails, no writes can occur.

âœ… Solution Ideas:
Add a redundant load balancer (e.g., keepalived + VRRP)

Use automatic failover for the database (e.g., MySQL Group Replication, ProxySQL)

ğŸ” Security Issues
Issue	Description
No Firewall	Nothing blocks malicious traffic
No HTTPS	Communication is not encrypted â€” vulnerable to MITM attacks

âœ… Solutions:
Add firewalls to control access to servers (e.g., only allow ports 80/443/3306)

Use Let's Encrypt or SSL certificates with Nginx/HAProxy for HTTPS

ğŸš¨ No Monitoring
If something fails (server crash, slow DB), you wonâ€™t know.

âœ… Solutions:
Implement monitoring tools:

Prometheus + Grafana (metrics)

Nagios (alerts)

ELK stack (logs)
